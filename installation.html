

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Installation &mdash; mp++ 0.20 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Tutorial" href="tutorial.html" />
    <link rel="prev" title="Welcome to mp++’s documentation!" href="index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> mp++
          

          
          </a>

          
            
            
              <div class="version">
                0.20
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="#installation-from-source">Installation from source</a></li>
<li class="toctree-l2"><a class="reference internal" href="#packages">Packages</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#conda">Conda</a></li>
<li class="toctree-l3"><a class="reference internal" href="#freebsd">FreeBSD</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#checking-the-installation">Checking the installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#including-mp-in-your-project-via-cmake">Including mp++ in your project via CMake</a></li>
<li class="toctree-l2"><a class="reference internal" href="#compiler-and-platform-specific-notes">Compiler and platform specific notes</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tutorial.html">Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="reference.html">Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="benchmarks.html">Benchmarks</a></li>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Changelog</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">mp++</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Installation</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/installation.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="installation">
<span id="id1"></span><h1>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h1>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>mp++ is written in modern C++, and it requires a compiler able to understand
at least C++11 (mp++ will also use features from C++14 and C++17,
if supported by the compiler). The library is regularly tested on
a comprehensive continuous integration pipeline, which includes:</p>
<ul class="simple">
<li><p>various versions of the three major compilers (GCC, Clang and MSVC),</p></li>
<li><p>various versions of the three major operating systems
(Linux, Windows and OSX),</p></li>
<li><p>x86, ARM and PowerPC processors.</p></li>
</ul>
<p>mp++ has the following dependencies:</p>
<ul class="simple">
<li><p>the <a class="reference external" href="https://gmplib.org/">GMP</a> library, <strong>mandatory</strong> (GMP 5 and later versions are supported,
the <a class="reference external" href="http://mpir.org/">MPIR</a> fork of GMP can also be used);</p></li>
<li><p>the <a class="reference external" href="https://www.mpfr.org">GNU MPFR</a> multiprecision floating-point library, <em>optional</em>, used in the implementation
of the <a class="reference internal" href="real.html#_CPPv4N4mppp4realE" title="mppp::real"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">real</span></code></a> class and for providing support
for the <code class="docutils literal notranslate"><span class="pre">long</span> <span class="pre">double</span></code> type (MPFR 3 or a later version is required);</p></li>
<li><p>the <a class="reference external" href="http://arblib.org/">Arb</a> and <a class="reference external" href="http://flintlib.org/">FLINT</a> libraries, <em>optional</em>,
used in the implementation of additional special functions for the
<a class="reference internal" href="real.html#_CPPv4N4mppp4realE" title="mppp::real"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">real</span></code></a> class;</p></li>
<li><p>the <a class="reference external" href="https://gcc.gnu.org/onlinedocs/libquadmath/">quadmath library</a> from GCC, <em>optional</em>, used
in the implementation of the <a class="reference internal" href="real128.html#_CPPv4N4mppp7real128E" title="mppp::real128"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">real128</span></code></a> class
(typically, the quadmath library is part of GCC and it does not need to
be installed separately);</p></li>
<li><p>the <a class="reference external" href="https://www.boost.org/">Boost</a> libraries, <em>optional</em>, currently used
only in the benchmarking suite.</p></li>
</ul>
<p>Additionally, <a class="reference external" href="https://cmake.org/">CMake</a> is the build system used by mp++ and it must also be available when
installing from source (the minimum required version is 3.3).</p>
</div>
<div class="section" id="installation-from-source">
<h2>Installation from source<a class="headerlink" href="#installation-from-source" title="Permalink to this headline">¶</a></h2>
<p>Source releases of mp++ can be downloaded from
<a class="reference external" href="https://github.com/bluescarni/mppp/releases">github</a>.
Once in the source tree
of mp++, you can use <code class="docutils literal notranslate"><span class="pre">cmake</span></code> to configure the build to your liking
(e.g., enabling optional features, customizing the installation
path, etc.). The available configuration options are:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">MPPP_WITH_MPFR</span></code>: enable features relying on the GNU
MPFR library (off by default),</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">MPPP_WITH_ARB</span></code>: enable features relying on the Arb library
(off by default, requires the <code class="docutils literal notranslate"><span class="pre">MPPP_WITH_MPFR</span></code> option to be active),</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">MPPP_WITH_QUADMATH</span></code>: enable features relying on the
quadmath library (off by default),</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">MPPP_BUILD_TESTS</span></code>: build the test suite (off by default),</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">MPPP_BUILD_BENCHMARKS</span></code>: build the benchmarking suite (off by default),</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">MPPP_BUILD_STATIC_LIBRARY</span></code>: build mp++ as a static library, instead
of a dynamic library (off by default),</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">MPPP_MSVC_UNICODE</span></code>: enable Unicode solutions for MSVC (available only
when using MSVC, off by default).</p></li>
</ul>
<p>Note that the <code class="docutils literal notranslate"><span class="pre">MPPP_WITH_QUADMATH</span></code> option, at this time, is available only
using GCC (all the supported versions) and Clang
(since version 3.9). When this option is active,
mp++ needs access at build time to both the quadmath header
<code class="docutils literal notranslate"><span class="pre">quadmath.h</span></code> and the quadmath library
<code class="docutils literal notranslate"><span class="pre">libquadmath.so</span></code>, which may be installed in
non-standard locations. While GCC is typically
able to resolve the correct paths automatically, Clang might need assistance
in order to identify the correct locations of these files.</p>
<p>To build mp++, you can run the following CMake command from the
build directory:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> cmake --build .
</pre></div>
</div>
<p>To install mp++, you can use the following CMake command:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> cmake  --build . --target install
</pre></div>
</div>
<p>The installation command will copy the mp++ headers and library to the
<code class="docutils literal notranslate"><span class="pre">CMAKE_INSTALL_PREFIX</span></code> directory.</p>
<p>If you enabled the <code class="docutils literal notranslate"><span class="pre">MPPP_BUILD_TESTS</span></code> option, you can run the test suite
with the following command:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> cmake  --build . --target <span class="nb">test</span>
</pre></div>
</div>
<p>If you enabled the <code class="docutils literal notranslate"><span class="pre">MPPP_BUILD_BENCHMARKS</span></code> option, you can run the benchmark
suite with the following command:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> cmake  --build . --target benchmark
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>On Windows, and if mp++ is built as a shared library (the default),
in order to execute the test or the benchmark suite you have to ensure that the
<code class="docutils literal notranslate"><span class="pre">PATH</span></code> variable includes the directory that contains the mp++
DLL (otherwise the tests will fail to run).</p>
</div>
</div>
<div class="section" id="packages">
<h2>Packages<a class="headerlink" href="#packages" title="Permalink to this headline">¶</a></h2>
<p>mp++ is also available from a variety of package managers on various platforms.</p>
<div class="section" id="conda">
<h3>Conda<a class="headerlink" href="#conda" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span class="versionmodified added">New in version 0.2.</span></p>
</div>
<p>mp++ is available in the <a class="reference external" href="https://conda.io/en/latest/">conda</a> package manager from the
<a class="reference external" href="https://conda-forge.org/">conda-forge</a> channel. Packages for Linux, Windows
and OSX are available. In order to install mp++ via conda, you just need
to add <code class="docutils literal notranslate"><span class="pre">conda-forge</span></code> to the channels:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> conda config --add channels conda-forge
<span class="gp">$</span> conda install mppp
</pre></div>
</div>
<p>(note that the <a class="reference external" href="https://anaconda.org/conda-forge/mppp">conda package</a> for mp++ is named <code class="docutils literal notranslate"><span class="pre">mppp</span></code> rather than <code class="docutils literal notranslate"><span class="pre">mp++</span></code>)</p>
<p>Please refer to the <a class="reference external" href="https://conda.io/en/latest/">conda documentation</a> for instructions on how to setup and manage
your conda installation.</p>
</div>
<div class="section" id="freebsd">
<h3>FreeBSD<a class="headerlink" href="#freebsd" title="Permalink to this headline">¶</a></h3>
<p>A FreeBSD port via <a class="reference external" href="https://www.freebsd.org/doc/handbook/pkgng-intro.html">pkg</a> has been created for
mp++. In order to install mp++ using pkg, execute the following command:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> pkg install mppp
</pre></div>
</div>
</div>
</div>
<div class="section" id="checking-the-installation">
<h2>Checking the installation<a class="headerlink" href="#checking-the-installation" title="Permalink to this headline">¶</a></h2>
<p>You can test the installation of mp++ with the following
simple <code class="docutils literal notranslate"><span class="pre">main.cpp</span></code> program:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;mp++/mp++.hpp&gt;</span><span class="cp"></span>

<span class="k">using</span> <span class="n">int_t</span> <span class="o">=</span> <span class="n">mppp</span><span class="o">::</span><span class="n">integer</span><span class="o">&lt;</span><span class="mi">1</span><span class="o">&gt;</span><span class="p">;</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
    <span class="n">int_t</span> <span class="n">n</span><span class="p">{</span><span class="mi">42</span><span class="p">};</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">n</span> <span class="o">&lt;&lt;</span> <span class="sc">&#39;\n&#39;</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>If mp++ is installed in a standard prefix, on a typical GNU/Linux
system you can compile this example with the following command:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> g++ -std<span class="o">=</span>c++11 main.cpp -lmp++ -lgmp
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code class="docutils literal notranslate"><span class="pre">-std=c++11</span></code> flag is not necessary if your GCC version is recent enough (i.e., for GCC 6 and later).</p>
</div>
<p>Because parts of mp++ are implemented using templates,
users of the library will have to explicitly link to GMP
and (if enabled) MPFR. Explicit linking to the other optional
dependencies (quadmath, Arb, etc.) is not necessary, as they are
used only within the compiled component
of the mp++ library.</p>
<p>If you are using CMake, it is highly recommended to make use of the config-file
package provided with mp++ rather
than locating and linking manually the required dependencies
(see the next section).</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Unless the definition <code class="docutils literal notranslate"><span class="pre">NDEBUG</span></code> is activated at compile time, mp++ runs extensive
internal debug checks at runtime which carry a large performance penalty. Users are advised
to always define <code class="docutils literal notranslate"><span class="pre">NDEBUG</span></code> when compiling code using mp++ in <code class="docutils literal notranslate"><span class="pre">Release</span></code> builds.</p>
</div>
</div>
<div class="section" id="including-mp-in-your-project-via-cmake">
<h2>Including mp++ in your project via CMake<a class="headerlink" href="#including-mp-in-your-project-via-cmake" title="Permalink to this headline">¶</a></h2>
<div class="versionadded">
<p><span class="versionmodified added">New in version 0.2.</span></p>
</div>
<p>As a part of the mp++ installation, a group of CMake files is installed into
<code class="docutils literal notranslate"><span class="pre">CMAKE_INSTALL_PREFIX/lib/cmake/mp++</span></code>.
This bundle, which is known in the CMake lingo as a <a class="reference external" href="https://cmake.org/cmake/help/v3.3/manual/cmake-packages.7.html">config-file package</a>,
facilitates the detection and use of mp++ from other CMake-based projects.
mp++’s config-file package, once loaded, provides
an imported target called <code class="docutils literal notranslate"><span class="pre">mp++::mp++</span></code> which encapsulates all the information
necessary to use mp++. That is, linking to
<code class="docutils literal notranslate"><span class="pre">mp++::mp++</span></code> ensures that mp++’s include directories are added to the include
path of the compiler, and that the libraries
on which mp++ depends (e.g., GMP) are brought into the link chain.</p>
<p>For instance, a <code class="docutils literal notranslate"><span class="pre">CMakeLists.txt</span></code> file for the simple <code class="docutils literal notranslate"><span class="pre">main.cpp</span></code>
program presented earlier may look like this:</p>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="c"># mp++ needs at least CMake 3.3.</span>
<span class="nb">cmake_minimum_required</span><span class="p">(</span><span class="s">VERSION</span> <span class="s">3.3.0</span><span class="p">)</span>

<span class="c"># The name of our project.</span>
<span class="nb">project</span><span class="p">(</span><span class="s">sample_project</span><span class="p">)</span>

<span class="c"># Look for an installation of mp++ in the system.</span>
<span class="nb">find_package</span><span class="p">(</span><span class="s">mp++</span> <span class="s">REQUIRED</span><span class="p">)</span>

<span class="c"># Create an executable, and link it to the mp++::mp++ imported target.</span>
<span class="c"># This ensures that, in the compilation of &#39;main&#39;, mp++&#39;s include</span>
<span class="c"># dirs are added to the include path of the compiler and that mp++&#39;s</span>
<span class="c"># dependencies (e.g., GMP) are transitively linked to &#39;main&#39;.</span>
<span class="nb">add_executable</span><span class="p">(</span><span class="s">main</span> <span class="s">main.cpp</span><span class="p">)</span>
<span class="nb">target_link_libraries</span><span class="p">(</span><span class="s">main</span> <span class="s">mp++::mp++</span><span class="p">)</span>

<span class="c"># This line indicates to your compiler</span>
<span class="c"># that C++11 is needed for the compilation.</span>
<span class="c"># Not strictly necessary with a recent-enough compiler.</span>
<span class="nb">set_property</span><span class="p">(</span><span class="s">TARGET</span> <span class="s">main</span> <span class="s">PROPERTY</span> <span class="s">CXX_STANDARD</span> <span class="s">11</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="compiler-and-platform-specific-notes">
<h2>Compiler and platform specific notes<a class="headerlink" href="#compiler-and-platform-specific-notes" title="Permalink to this headline">¶</a></h2>
<p>Visual Studio:</p>
<ul class="simple">
<li><p>The mp++ library is compiled with the <code class="docutils literal notranslate"><span class="pre">NOMINMAX</span></code> and
<code class="docutils literal notranslate"><span class="pre">WIN32_LEAN_AND_MEAN</span></code> definitions, and,
if supported, with the <code class="docutils literal notranslate"><span class="pre">/permissive-</span></code> compiler flag.</p></li>
<li><p>If the <code class="docutils literal notranslate"><span class="pre">MPPP_MSVC_UNICODE</span></code> CMake option is enabled, the mp++ library
is compiled with the <code class="docutils literal notranslate"><span class="pre">UNICODE</span></code> and <code class="docutils literal notranslate"><span class="pre">_UNICODE</span></code> definitions.</p></li>
<li><p>When building mp++ as a static library, MSVC’s static runtime will
be used (instead of the dynamic runtime). One can force the use
of the dynamic runtime when building mp++ as a static library by
turning on the <code class="docutils literal notranslate"><span class="pre">MPPP_BUILD_STATIC_LIBRARY_WITH_DYNAMIC_MSVC_RUNTIME</span></code>
advanced CMake option.</p></li>
</ul>
<p>MinGW:</p>
<ul class="simple">
<li><p>Due to a compiler bug in the implementation of <code class="docutils literal notranslate"><span class="pre">thread_local</span></code>
storage <a class="footnote-reference brackets" href="#mingw-tls" id="id2">1</a>,
certain performance optimisations are disabled
when compiling with MinGW.</p></li>
</ul>
<p>OSX:</p>
<ul class="simple">
<li><p>When using older versions of Xcode, performance in multi-threading
scenarios might be reduced due to lack of support for the C++11
<code class="docutils literal notranslate"><span class="pre">thread_local</span></code> feature.</p></li>
</ul>
<p>FreeBSD:</p>
<ul class="simple">
<li><p>The <code class="docutils literal notranslate"><span class="pre">long</span> <span class="pre">double</span></code> overloads of some mathematical functions
(such as <code class="docutils literal notranslate"><span class="pre">std::pow()</span></code>) may be implemented in
<code class="docutils literal notranslate"><span class="pre">double</span></code> precision. Additionally, if the arguments to such mathematical
functions are compile-time constants, the compiler
<em>may</em> decide (depending on the optimisation level) to actually compute the
result at compile time using full <code class="docutils literal notranslate"><span class="pre">long</span> <span class="pre">double</span></code> precision.
This behaviour can lead to subtle inconsistencies, and it results in one
test case from the mp++ test suite failing on FreeBSD <a class="footnote-reference brackets" href="#freebsd-mppp-bug" id="id3">2</a>.</p></li>
</ul>
<p class="rubric">Footnotes</p>
<dl class="footnote brackets">
<dt class="label" id="mingw-tls"><span class="brackets"><a class="fn-backref" href="#id2">1</a></span></dt>
<dd><p><a class="reference external" href="https://sourceforge.net/p/mingw-w64/bugs/445/">https://sourceforge.net/p/mingw-w64/bugs/445/</a></p>
</dd>
<dt class="label" id="freebsd-mppp-bug"><span class="brackets"><a class="fn-backref" href="#id3">2</a></span></dt>
<dd><p><a class="reference external" href="https://github.com/bluescarni/mppp/issues/132">https://github.com/bluescarni/mppp/issues/132</a></p>
</dd>
</dl>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="tutorial.html" class="btn btn-neutral float-right" title="Tutorial" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral float-left" title="Welcome to mp++’s documentation!" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016-2020, Francesco Biscani

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>